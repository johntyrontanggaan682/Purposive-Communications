<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Purposive Communication | Admin Dashboard</title>

  <script src="https://cdn.tailwindcss.com"></script>
  <script>
    tailwind.config = {
      theme: {
        extend: {
          colors: {
            brand: {
              50: "#E7F7F5",
              100: "#CFF0EC",
              200: "#9FE1D9",
              300: "#6ED2C6",
              400: "#3EC3B3",
              500: "#13A89A",
              600: "#0F877B",
              700: "#0B665C",
              800: "#07453E",
              900: "#032420",
            },
          },
          boxShadow: {
            soft: "0 18px 45px rgba(2, 8, 23, 0.10)",
            softer: "0 12px 30px rgba(2, 8, 23, 0.08)",
          },
        },
      },
    };
  </script>

  <style>
    .page-bg{
      background:
        radial-gradient(1200px 500px at 10% -10%, rgba(19,168,154,0.16), transparent 55%),
        radial-gradient(900px 450px at 100% 0%, rgba(19,168,154,0.12), transparent 50%),
        #E7F7F5;
    }
    .nice-scroll::-webkit-scrollbar{ width: 10px; }
    .nice-scroll::-webkit-scrollbar-thumb{ background: rgba(2,8,23,.15); border-radius: 999px; }
    .nice-scroll::-webkit-scrollbar-track{ background: transparent; }
  </style>
</head>

<body class="page-bg text-slate-800">
  <div class="min-h-screen flex">
    <!-- SIDEBAR -->
    <aside id="sidebar" class="hidden lg:flex w-72 shrink-0 flex-col bg-white/80 backdrop-blur border-r border-slate-100">
      <div class="px-6 py-5 flex items-center gap-3 border-b border-slate-100">
        <div class="h-11 w-11 rounded-xl bg-brand-500/10 ring-1 ring-black/5 flex items-center justify-center">
          <svg viewBox="0 0 24 24" class="h-6 w-6 text-brand-700" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M4 7l8-4 8 4v10l-8 4-8-4V7z"></path>
            <path d="M8 11l2 2 5-5"></path>
          </svg>
        </div>
        <div>
          <p class="text-base font-extrabold text-slate-900 leading-tight">Purposive Communication</p>
          <p class="text-xs text-slate-500 font-semibold">Admin Dashboard</p>
        </div>
      </div>

      <nav class="px-4 py-4 flex-1">
        <a href="#"
          class="flex items-center gap-3 rounded-xl px-4 py-3 text-sm font-semibold bg-brand-600 text-white shadow-softer">
          <span class="h-9 w-9 rounded-xl bg-white/15 ring-1 ring-white/15 flex items-center justify-center">
            <svg viewBox="0 0 24 24" class="h-5 w-5" fill="none" stroke="currentColor" stroke-width="2">
              <path stroke-linecap="round" stroke-linejoin="round" d="M4 13h7V4H4v9zM13 20h7v-7h-7v7zM13 11h7V4h-7v7zM4 20h7v-5H4v5z" />
            </svg>
          </span>
          Dashboard
        </a>

        <a href="#" class="mt-2 flex items-center gap-3 rounded-xl px-4 py-3 text-sm font-semibold text-slate-700 hover:bg-slate-100">
          <span class="h-9 w-9 rounded-xl bg-slate-50 ring-1 ring-black/5 flex items-center justify-center text-slate-600">
            <svg viewBox="0 0 24 24" class="h-5 w-5" fill="none" stroke="currentColor" stroke-width="2">
              <path stroke-linecap="round" stroke-linejoin="round" d="M20 21v-2a4 4 0 00-4-4H8a4 4 0 00-4 4v2" />
              <circle cx="12" cy="7" r="4" />
            </svg>
          </span>
          Students
        </a>

        <a href="#" class="mt-2 flex items-center gap-3 rounded-xl px-4 py-3 text-sm font-semibold text-slate-700 hover:bg-slate-100">
          <span class="h-9 w-9 rounded-xl bg-slate-50 ring-1 ring-black/5 flex items-center justify-center text-slate-600">
            <svg viewBox="0 0 24 24" class="h-5 w-5" fill="none" stroke="currentColor" stroke-width="2">
              <path stroke-linecap="round" stroke-linejoin="round" d="M8 17V9m4 8V5m4 12v-7M4 19h16" />
            </svg>
          </span>
          Lessons Progress
        </a>

        <a href="#" class="mt-2 flex items-center gap-3 rounded-xl px-4 py-3 text-sm font-semibold text-slate-700 hover:bg-slate-100">
          <span class="h-9 w-9 rounded-xl bg-slate-50 ring-1 ring-black/5 flex items-center justify-center text-slate-600">
            <svg viewBox="0 0 24 24" class="h-5 w-5" fill="none" stroke="currentColor" stroke-width="2">
              <path stroke-linecap="round" stroke-linejoin="round" d="M9 17v-6a2 2 0 012-2h2a2 2 0 012 2v6" />
              <path stroke-linecap="round" stroke-linejoin="round" d="M6 21h12M8 7h8M8 3h8" />
            </svg>
          </span>
          Reports
        </a>

        <a href="#" class="mt-2 flex items-center gap-3 rounded-xl px-4 py-3 text-sm font-semibold text-slate-700 hover:bg-slate-100">
          <span class="h-9 w-9 rounded-xl bg-slate-50 ring-1 ring-black/5 flex items-center justify-center text-slate-600">
            <svg viewBox="0 0 24 24" class="h-5 w-5" fill="none" stroke="currentColor" stroke-width="2">
              <path stroke-linecap="round" stroke-linejoin="round" d="M21 15a4 4 0 01-4 4H7l-4 3V7a4 4 0 014-4h10a4 4 0 014 4v8z" />
            </svg>
          </span>
          Messages
        </a>

        <a href="#" class="mt-2 flex items-center gap-3 rounded-xl px-4 py-3 text-sm font-semibold text-slate-700 hover:bg-slate-100">
          <span class="h-9 w-9 rounded-xl bg-slate-50 ring-1 ring-black/5 flex items-center justify-center text-slate-600">
            <svg viewBox="0 0 24 24" class="h-5 w-5" fill="none" stroke="currentColor" stroke-width="2">
              <path stroke-linecap="round" stroke-linejoin="round" d="M12 15.5A3.5 3.5 0 1112 8.5a3.5 3.5 0 010 7z" />
              <path stroke-linecap="round" stroke-linejoin="round" d="M19.4 15a7.97 7.97 0 00.1-3l2-1.5-2-3.5-2.4 1a8.2 8.2 0 00-2.6-1.5L14 3h-4l-.5 3.5A8.2 8.2 0 007 8l-2.4-1-2 3.5 2 1.5a7.97 7.97 0 00.1 3L2.6 16.5l2 3.5 2.4-1a8.2 8.2 0 002.6 1.5L10 21h4l.5-3.5A8.2 8.2 0 0017 19l2.4 1 2-3.5L19.4 15z" />
            </svg>
          </span>
          Settings
        </a>
      </nav>

      <div class="mt-auto px-4 py-5 border-t border-slate-100">
        <a href="login.html" class="flex items-center gap-3 rounded-xl px-4 py-3 text-sm font-semibold text-rose-600 hover:bg-rose-50">
          <span class="h-9 w-9 rounded-xl bg-rose-50 ring-1 ring-black/5 flex items-center justify-center">
            <svg viewBox="0 0 24 24" class="h-5 w-5" fill="none" stroke="currentColor" stroke-width="2">
              <path stroke-linecap="round" stroke-linejoin="round" d="M10 17l5-5-5-5" />
              <path stroke-linecap="round" stroke-linejoin="round" d="M15 12H3" />
              <path stroke-linecap="round" stroke-linejoin="round" d="M21 21V3" />
            </svg>
          </span>
          Logout
        </a>
      </div>
    </aside>

    <!-- MAIN -->
    <div class="flex-1 flex flex-col">
      <!-- TOP BAR -->
      <header class="sticky top-0 z-40 bg-white/80 backdrop-blur border-b border-slate-100">
        <div class="px-4 sm:px-6 lg:px-8 py-4 flex items-center justify-between gap-3">
          <div class="flex items-center gap-3">
            <button id="openSidebarBtn"
              class="lg:hidden inline-flex h-11 w-11 items-center justify-center rounded-xl bg-slate-50 ring-1 ring-black/5 hover:bg-slate-100"
              aria-label="Open menu">
              <svg class="h-6 w-6 text-slate-700" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path stroke-linecap="round" stroke-linejoin="round" d="M4 6h16M4 12h16M4 18h16" />
              </svg>
            </button>

            <div class="flex items-center gap-3">
              <div class="hidden sm:flex h-11 w-11 items-center justify-center rounded-xl bg-brand-50 ring-1 ring-black/5">
                <svg viewBox="0 0 24 24" class="h-6 w-6 text-brand-700" fill="none" stroke="currentColor" stroke-width="2">
                  <path d="M4 7l8-4 8 4v10l-8 4-8-4V7z"></path>
                  <path d="M8 11l2 2 5-5"></path>
                </svg>
              </div>
              <div>
                <p class="text-lg font-extrabold text-slate-900 leading-tight">Purposive Communication</p>
                <p class="text-xs text-slate-500 font-semibold -mt-0.5">Admin Dashboard</p>
              </div>
            </div>
          </div>

          <div class="flex items-center gap-4">
            <button class="relative inline-flex h-11 w-11 items-center justify-center rounded-xl bg-white ring-1 ring-black/5 hover:bg-slate-50" aria-label="Notifications">
              <svg viewBox="0 0 24 24" class="h-6 w-6 text-slate-700" fill="none" stroke="currentColor" stroke-width="2">
                <path stroke-linecap="round" stroke-linejoin="round" d="M15 17h5l-1.4-1.4A2 2 0 0118 14.2V11a6 6 0 10-12 0v3.2c0 .5-.2 1-.6 1.4L4 17h5" />
                <path stroke-linecap="round" stroke-linejoin="round" d="M9 17a3 3 0 006 0" />
              </svg>
              <span class="absolute top-2 right-2 h-2.5 w-2.5 rounded-full bg-rose-500 ring-2 ring-white"></span>
            </button>

            <div class="flex items-center gap-3">
              <div class="h-11 w-11 rounded-full bg-brand-600 text-white font-extrabold flex items-center justify-center">AD</div>
              <div class="hidden sm:block">
                <p class="text-sm font-extrabold text-slate-900 leading-tight">Admin User</p>
                <p class="text-xs text-slate-500 font-semibold -mt-0.5">Administrator</p>
              </div>
            </div>
          </div>
        </div>
      </header>

      <!-- CONTENT -->
      <main class="px-4 sm:px-6 lg:px-8 py-8">
        <!-- Summary Cards -->
        <section class="grid gap-5 sm:grid-cols-2 lg:grid-cols-4">
          <div class="rounded-2xl bg-white shadow-softer ring-1 ring-black/5 p-5 relative overflow-hidden">
            <span class="absolute inset-y-0 left-0 w-1.5 bg-brand-500"></span>
            <div class="flex items-start justify-between">
              <div>
                <p class="text-sm font-semibold text-slate-500">Total Students</p>
                <p id="statTotal" class="mt-2 text-3xl font-extrabold text-slate-900">0</p>
              </div>
              <div class="h-12 w-12 rounded-xl bg-brand-50 ring-1 ring-black/5 flex items-center justify-center text-brand-700">
                <svg viewBox="0 0 24 24" class="h-6 w-6" fill="none" stroke="currentColor" stroke-width="2">
                  <path stroke-linecap="round" stroke-linejoin="round" d="M20 21v-2a4 4 0 00-4-4H8a4 4 0 00-4 4v2" />
                  <circle cx="12" cy="7" r="4" />
                </svg>
              </div>
            </div>
          </div>

          <div class="rounded-2xl bg-white shadow-softer ring-1 ring-black/5 p-5 relative overflow-hidden">
            <span class="absolute inset-y-0 left-0 w-1.5 bg-emerald-500"></span>
            <div class="flex items-start justify-between">
              <div>
                <p class="text-sm font-semibold text-slate-500">Active Today</p>
                <p id="statActive" class="mt-2 text-3xl font-extrabold text-slate-900">0</p>
              </div>
              <div class="h-12 w-12 rounded-xl bg-emerald-50 ring-1 ring-black/5 flex items-center justify-center text-emerald-700">
                <svg viewBox="0 0 24 24" class="h-6 w-6" fill="none" stroke="currentColor" stroke-width="2">
                  <path stroke-linecap="round" stroke-linejoin="round" d="M12 12a5 5 0 100-10 5 5 0 000 10z" />
                  <path stroke-linecap="round" stroke-linejoin="round" d="M17 20H7a4 4 0 014-4h2a4 4 0 014 4z" />
                  <path stroke-linecap="round" stroke-linejoin="round" d="M19 8l2 2m0-2l-2 2" />
                </svg>
              </div>
            </div>
          </div>

          <div class="rounded-2xl bg-white shadow-softer ring-1 ring-black/5 p-5 relative overflow-hidden">
            <span class="absolute inset-y-0 left-0 w-1.5 bg-sky-500"></span>
            <div class="flex items-start justify-between">
              <div>
                <p class="text-sm font-semibold text-slate-500">Avg Completion</p>
                <p class="mt-2 text-3xl font-extrabold text-slate-900"><span id="statAvg">0</span>%</p>
              </div>
              <div class="h-12 w-12 rounded-xl bg-sky-50 ring-1 ring-black/5 flex items-center justify-center text-sky-700">
                <svg viewBox="0 0 24 24" class="h-6 w-6" fill="none" stroke="currentColor" stroke-width="2">
                  <path stroke-linecap="round" stroke-linejoin="round" d="M12 6v6l4 2" />
                  <circle cx="12" cy="12" r="9" />
                </svg>
              </div>
            </div>
          </div>

          <div class="rounded-2xl bg-white shadow-softer ring-1 ring-black/5 p-5 relative overflow-hidden">
            <span class="absolute inset-y-0 left-0 w-1.5 bg-orange-500"></span>
            <div class="flex items-start justify-between">
              <div>
                <p class="text-sm font-semibold text-slate-500">Pending Assessments</p>
                <p id="statPending" class="mt-2 text-3xl font-extrabold text-slate-900">0</p>
              </div>
              <div class="h-12 w-12 rounded-xl bg-orange-50 ring-1 ring-black/5 flex items-center justify-center text-orange-700">
                <svg viewBox="0 0 24 24" class="h-6 w-6" fill="none" stroke="currentColor" stroke-width="2">
                  <path stroke-linecap="round" stroke-linejoin="round" d="M7 3h10a2 2 0 012 2v14a2 2 0 01-2 2H7a2 2 0 01-2-2V5a2 2 0 012-2z" />
                  <path stroke-linecap="round" stroke-linejoin="round" d="M9 7h6M9 11h6M9 15h4" />
                </svg>
              </div>
            </div>
          </div>
        </section>

        <!-- Lesson Overview -->
        <section class="mt-6 rounded-2xl bg-white shadow-softer ring-1 ring-black/5 p-6">
          <h2 class="text-xl font-extrabold text-slate-900">Lesson Completion Overview</h2>

          <div class="mt-5 grid gap-5 sm:grid-cols-2 lg:grid-cols-4">
            <div class="rounded-2xl ring-1 ring-black/5 bg-brand-50 p-5">
              <div class="flex items-center justify-between">
                <p class="text-sm font-extrabold text-brand-800">Lesson 1</p>
                <div class="h-10 w-10 rounded-xl bg-white/70 ring-1 ring-black/5 flex items-center justify-center text-brand-700">
                  <svg viewBox="0 0 24 24" class="h-5 w-5" fill="none" stroke="currentColor" stroke-width="2">
                    <path stroke-linecap="round" stroke-linejoin="round" d="M6 4h12v16H6V4z" />
                    <path stroke-linecap="round" stroke-linejoin="round" d="M8 7h8M8 11h8M8 15h6" />
                  </svg>
                </div>
              </div>
              <p class="mt-4 text-3xl font-extrabold text-brand-800"><span id="l1Done">0</span>/<span id="lTotal1">0</span></p>
              <p class="mt-1 text-sm text-brand-800/70">Students Completed</p>
            </div>

            <div class="rounded-2xl ring-1 ring-black/5 bg-emerald-50 p-5">
              <div class="flex items-center justify-between">
                <p class="text-sm font-extrabold text-emerald-800">Lesson 2</p>
                <div class="h-10 w-10 rounded-xl bg-white/70 ring-1 ring-black/5 flex items-center justify-center text-emerald-700">
                  <svg viewBox="0 0 24 24" class="h-5 w-5" fill="none" stroke="currentColor" stroke-width="2">
                    <path stroke-linecap="round" stroke-linejoin="round" d="M4 19h16" />
                    <path stroke-linecap="round" stroke-linejoin="round" d="M7 16V9" />
                    <path stroke-linecap="round" stroke-linejoin="round" d="M12 16V5" />
                    <path stroke-linecap="round" stroke-linejoin="round" d="M17 16v-7" />
                  </svg>
                </div>
              </div>
              <p class="mt-4 text-3xl font-extrabold text-emerald-800"><span id="l2Done">0</span>/<span id="lTotal2">0</span></p>
              <p class="mt-1 text-sm text-emerald-800/70">Students Completed</p>
            </div>

            <div class="rounded-2xl ring-1 ring-black/5 bg-sky-50 p-5">
              <div class="flex items-center justify-between">
                <p class="text-sm font-extrabold text-sky-800">Lesson 3</p>
                <div class="h-10 w-10 rounded-xl bg-white/70 ring-1 ring-black/5 flex items-center justify-center text-sky-700">
                  <svg viewBox="0 0 24 24" class="h-5 w-5" fill="none" stroke="currentColor" stroke-width="2">
                    <path stroke-linecap="round" stroke-linejoin="round" d="M4 7h16M4 12h10M4 17h16" />
                  </svg>
                </div>
              </div>
              <p class="mt-4 text-3xl font-extrabold text-sky-800"><span id="l3Done">0</span>/<span id="lTotal3">0</span></p>
              <p class="mt-1 text-sm text-sky-800/70">Students Completed</p>
            </div>

            <div class="rounded-2xl ring-1 ring-black/5 bg-orange-50 p-5">
              <div class="flex items-center justify-between">
                <p class="text-sm font-extrabold text-orange-800">Lesson 4</p>
                <div class="h-10 w-10 rounded-xl bg-white/70 ring-1 ring-black/5 flex items-center justify-center text-orange-700">
                  <svg viewBox="0 0 24 24" class="h-5 w-5" fill="none" stroke="currentColor" stroke-width="2">
                    <path stroke-linecap="round" stroke-linejoin="round" d="M8 4h10a2 2 0 012 2v14H8a2 2 0 01-2-2V6a2 2 0 012-2z" />
                    <path stroke-linecap="round" stroke-linejoin="round" d="M6 6h2" />
                  </svg>
                </div>
              </div>
              <p class="mt-4 text-3xl font-extrabold text-orange-800"><span id="l4Done">0</span>/<span id="lTotal4">0</span></p>
              <p class="mt-1 text-sm text-orange-800/70">Students Completed</p>
            </div>
          </div>
        </section>

        <!-- Student Monitoring -->
        <section class="mt-6 rounded-2xl bg-white shadow-softer ring-1 ring-black/5 p-6">
          <div class="flex flex-col gap-4 sm:flex-row sm:items-center sm:justify-between">
            <h2 class="text-xl font-extrabold text-slate-900">Student Monitoring</h2>

            <button id="exportBtn"
              class="inline-flex items-center justify-center gap-2 rounded-xl bg-brand-600 px-4 py-2.5 text-sm font-semibold text-white shadow-softer hover:bg-brand-700 focus:outline-none focus:ring-4 focus:ring-brand-200">
              <svg viewBox="0 0 24 24" class="h-5 w-5" fill="none" stroke="currentColor" stroke-width="2">
                <path stroke-linecap="round" stroke-linejoin="round" d="M12 3v12m0 0l4-4m-4 4l-4-4" />
                <path stroke-linecap="round" stroke-linejoin="round" d="M4 17v3h16v-3" />
              </svg>
              Export Report
            </button>
          </div>

          <!-- Filters -->
          <div class="mt-5 grid gap-3 lg:grid-cols-4">
            <div class="relative">
              <svg viewBox="0 0 24 24" class="pointer-events-none absolute left-3 top-1/2 h-5 w-5 -translate-y-1/2 text-slate-400" fill="none" stroke="currentColor" stroke-width="2">
                <circle cx="11" cy="11" r="7" />
                <path stroke-linecap="round" stroke-linejoin="round" d="M20 20l-3-3" />
              </svg>
              <input id="searchInput" type="text" placeholder="Search students..."
                class="w-full rounded-xl border border-slate-200 bg-white pl-10 pr-3 py-2.5 text-sm outline-none focus:ring-4 focus:ring-brand-200" />
            </div>

            <select id="courseFilter" class="w-full rounded-xl border border-slate-200 bg-white px-3 py-2.5 text-sm outline-none focus:ring-4 focus:ring-brand-200">
              <option value="all">All Courses</option>
            </select>

            <select id="yearFilter" class="w-full rounded-xl border border-slate-200 bg-white px-3 py-2.5 text-sm outline-none focus:ring-4 focus:ring-brand-200">
              <option value="all">All Year Levels</option>
              <option>1st Year</option>
              <option>2nd Year</option>
              <option>3rd Year</option>
              <option>4th Year</option>
              <option>5th Year</option>
            </select>

            <select id="progressFilter" class="w-full rounded-xl border border-slate-200 bg-white px-3 py-2.5 text-sm outline-none focus:ring-4 focus:ring-brand-200">
              <option value="all">All Progress Levels</option>
              <option value="0-25">0% - 25%</option>
              <option value="26-50">26% - 50%</option>
              <option value="51-75">51% - 75%</option>
              <option value="76-100">76% - 100%</option>
            </select>
          </div>

          <!-- Table -->
          <div class="mt-6 overflow-x-auto">
            <table class="min-w-[980px] w-full">
              <thead>
                <tr class="text-left text-xs font-extrabold text-slate-500 border-b border-slate-100">
                  <th class="py-3 pr-4">STUDENT</th>
                  <th class="py-3 pr-4">COURSE/YEAR</th>
                  <th class="py-3 pr-4">LAST<br/>LOGIN</th>
                  <th class="py-3 pr-4">STATUS</th>
                  <th class="py-3 pr-4">PROGRESS</th>
                  <th class="py-3 pr-4">L1</th>
                  <th class="py-3 pr-4">L2</th>
                  <th class="py-3 pr-4">L3</th>
                  <th class="py-3 pr-4">L4</th>
                  <th class="py-3 pr-4">QUIZ</th>
                  <th class="py-3 pr-4">ASSESSMENT</th>
                  <th class="py-3">ACTION</th>
                </tr>
              </thead>
              <tbody id="studentTbody" class="divide-y divide-slate-50"></tbody>
            </table>
          </div>
        </section>
      </main>
    </div>
  </div>

  <!-- Mobile sidebar overlay -->
  <div id="sidebarOverlay" class="fixed inset-0 z-50 hidden">
    <div class="absolute inset-0 bg-black/40"></div>
    <div class="absolute inset-y-0 left-0 w-80 bg-white shadow-soft">
      <div class="px-5 py-4 flex items-center justify-between border-b border-slate-100">
        <div class="flex items-center gap-3">
          <div class="h-10 w-10 rounded-xl bg-brand-50 ring-1 ring-black/5 flex items-center justify-center">
            <svg viewBox="0 0 24 24" class="h-6 w-6 text-brand-700" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M4 7l8-4 8 4v10l-8 4-8-4V7z"></path>
              <path d="M8 11l2 2 5-5"></path>
            </svg>
          </div>
          <div>
            <p class="text-sm font-extrabold text-slate-900 leading-tight">Purposive Communication</p>
            <p class="text-xs text-slate-500 font-semibold -mt-0.5">Admin Dashboard</p>
          </div>
        </div>
        <button id="closeSidebarBtn" class="h-10 w-10 rounded-xl bg-slate-50 ring-1 ring-black/5 flex items-center justify-center hover:bg-slate-100" aria-label="Close menu">
          <svg viewBox="0 0 24 24" class="h-5 w-5 text-slate-700" fill="none" stroke="currentColor" stroke-width="2">
            <path stroke-linecap="round" stroke-linejoin="round" d="M6 18L18 6M6 6l12 12" />
          </svg>
        </button>
      </div>

      <div class="p-4">
        <div class="space-y-2">
          <a href="#" class="flex items-center gap-3 rounded-xl px-4 py-3 text-sm font-semibold bg-brand-600 text-white">
            <span class="h-9 w-9 rounded-xl bg-white/15 ring-1 ring-white/15 flex items-center justify-center">
              <svg viewBox="0 0 24 24" class="h-5 w-5" fill="none" stroke="currentColor" stroke-width="2">
                <path stroke-linecap="round" stroke-linejoin="round" d="M4 13h7V4H4v9zM13 20h7v-7h-7v7zM13 11h7V4h-7v7zM4 20h7v-5H4v5z" />
              </svg>
            </span>
            Dashboard
          </a>
          <a href="#" class="flex items-center gap-3 rounded-xl px-4 py-3 text-sm font-semibold text-slate-700 hover:bg-slate-100">
            <span class="h-9 w-9 rounded-xl bg-slate-50 ring-1 ring-black/5 flex items-center justify-center">
              <svg viewBox="0 0 24 24" class="h-5 w-5 text-slate-600" fill="none" stroke="currentColor" stroke-width="2">
                <path stroke-linecap="round" stroke-linejoin="round" d="M20 21v-2a4 4 0 00-4-4H8a4 4 0 00-4 4v2" />
                <circle cx="12" cy="7" r="4" />
              </svg>
            </span>
            Students
          </a>
          <a href="#" class="flex items-center gap-3 rounded-xl px-4 py-3 text-sm font-semibold text-slate-700 hover:bg-slate-100">
            <span class="h-9 w-9 rounded-xl bg-slate-50 ring-1 ring-black/5 flex items-center justify-center">
              <svg viewBox="0 0 24 24" class="h-5 w-5 text-slate-600" fill="none" stroke="currentColor" stroke-width="2">
                <path stroke-linecap="round" stroke-linejoin="round" d="M8 17V9m4 8V5m4 12v-7M4 19h16" />
              </svg>
            </span>
            Lessons Progress
          </a>
          <a href="#" class="flex items-center gap-3 rounded-xl px-4 py-3 text-sm font-semibold text-slate-700 hover:bg-slate-100">
            <span class="h-9 w-9 rounded-xl bg-slate-50 ring-1 ring-black/5 flex items-center justify-center">
              <svg viewBox="0 0 24 24" class="h-5 w-5 text-slate-600" fill="none" stroke="currentColor" stroke-width="2">
                <path stroke-linecap="round" stroke-linejoin="round" d="M9 17v-6a2 2 0 012-2h2a2 2 0 012 2v6" />
                <path stroke-linecap="round" stroke-linejoin="round" d="M6 21h12M8 7h8M8 3h8" />
              </svg>
            </span>
            Reports
          </a>
          <a href="#" class="flex items-center gap-3 rounded-xl px-4 py-3 text-sm font-semibold text-slate-700 hover:bg-slate-100">
            <span class="h-9 w-9 rounded-xl bg-slate-50 ring-1 ring-black/5 flex items-center justify-center">
              <svg viewBox="0 0 24 24" class="h-5 w-5 text-slate-600" fill="none" stroke="currentColor" stroke-width="2">
                <path stroke-linecap="round" stroke-linejoin="round" d="M21 15a4 4 0 01-4 4H7l-4 3V7a4 4 0 014-4h10a4 4 0 014 4v8z" />
              </svg>
            </span>
            Messages
          </a>
          <a href="#" class="flex items-center gap-3 rounded-xl px-4 py-3 text-sm font-semibold text-slate-700 hover:bg-slate-100">
            <span class="h-9 w-9 rounded-xl bg-slate-50 ring-1 ring-black/5 flex items-center justify-center">
              <svg viewBox="0 0 24 24" class="h-5 w-5 text-slate-600" fill="none" stroke="currentColor" stroke-width="2">
                <path stroke-linecap="round" stroke-linejoin="round" d="M12 15.5A3.5 3.5 0 1112 8.5a3.5 3.5 0 010 7z" />
                <path stroke-linecap="round" stroke-linejoin="round" d="M19.4 15a7.97 7.97 0 00.1-3l2-1.5-2-3.5-2.4 1a8.2 8.2 0 00-2.6-1.5L14 3h-4l-.5 3.5A8.2 8.2 0 007 8l-2.4-1-2 3.5 2 1.5a7.97 7.97 0 00.1 3L2.6 16.5l2 3.5 2.4-1a8.2 8.2 0 002.6 1.5L10 21h4l.5-3.5A8.2 8.2 0 0017 19l2.4 1 2-3.5L19.4 15z" />
              </svg>
            </span>
            Settings
          </a>
          <a href="login.html" class="mt-3 flex items-center gap-3 rounded-xl px-4 py-3 text-sm font-semibold text-rose-600 hover:bg-rose-50">
            <span class="h-9 w-9 rounded-xl bg-rose-50 ring-1 ring-black/5 flex items-center justify-center">
              <svg viewBox="0 0 24 24" class="h-5 w-5" fill="none" stroke="currentColor" stroke-width="2">
                <path stroke-linecap="round" stroke-linejoin="round" d="M10 17l5-5-5-5" />
                <path stroke-linecap="round" stroke-linejoin="round" d="M15 12H3" />
                <path stroke-linecap="round" stroke-linejoin="round" d="M21 21V3" />
              </svg>
            </span>
            Logout
          </a>
        </div>
      </div>
    </div>
  </div>

  <!-- STUDENT DETAILS MODAL -->
  <div id="detailsModal" class="fixed inset-0 z-[60] hidden">
    <div class="absolute inset-0 bg-black/55"></div>

    <div class="absolute inset-x-4 top-6 bottom-6 md:inset-x-10 lg:inset-x-24 flex items-center justify-center">
      <div class="w-full max-w-5xl h-full rounded-3xl bg-white shadow-soft ring-1 ring-black/10 overflow-hidden flex flex-col">
        <div class="bg-gradient-to-r from-brand-600 to-brand-500 px-7 py-5 flex items-center justify-between">
          <div>
            <p class="text-xl font-extrabold text-white">Student Details</p>
          </div>
          <button id="closeDetails" class="h-10 w-10 rounded-xl bg-white/15 ring-1 ring-white/15 text-white flex items-center justify-center hover:bg-white/20" aria-label="Close">
            <svg viewBox="0 0 24 24" class="h-5 w-5" fill="none" stroke="currentColor" stroke-width="2">
              <path stroke-linecap="round" stroke-linejoin="round" d="M6 18L18 6M6 6l12 12" />
            </svg>
          </button>
        </div>

        <div class="nice-scroll flex-1 overflow-y-auto p-7">
          <div class="rounded-2xl bg-slate-50 ring-1 ring-black/5 p-6">
            <div class="flex flex-col gap-6 md:flex-row md:items-start md:justify-between">
              <div class="flex items-start gap-5">
                <div id="dAvatar" class="h-16 w-16 rounded-full bg-brand-600 text-white font-extrabold flex items-center justify-center text-xl">MS</div>
                <div>
                  <p id="dName" class="text-xl font-extrabold text-slate-900">Maria Santos</p>
                  <p id="dId" class="text-sm text-slate-500 font-semibold">STU-2024-001</p>
                  <p id="dEmail" class="text-sm text-slate-500">maria.santos@student.edu</p>
                </div>
              </div>

              <div class="flex items-center gap-3">
                <span id="dStatusPill" class="inline-flex items-center rounded-full px-4 py-1.5 text-xs font-extrabold bg-emerald-100 text-emerald-800 ring-1 ring-black/5">
                  Active
                </span>
              </div>
            </div>

            <div class="mt-6 grid gap-4 sm:grid-cols-2 lg:grid-cols-4">
              <div>
                <p class="text-xs font-extrabold text-slate-400 uppercase">Course</p>
                <p id="dCourse" class="mt-1 font-extrabold text-slate-900">BS Computer Science</p>
              </div>
              <div>
                <p class="text-xs font-extrabold text-slate-400 uppercase">Year Level</p>
                <p id="dYear" class="mt-1 font-extrabold text-slate-900">2nd Year</p>
              </div>
              <div>
                <p class="text-xs font-extrabold text-slate-400 uppercase">Last Login</p>
                <p id="dLastLogin" class="mt-1 font-extrabold text-slate-900">2 hours ago</p>
              </div>
              <div>
                <p class="text-xs font-extrabold text-slate-400 uppercase">Overall Progress</p>
                <p class="mt-1 font-extrabold text-slate-900"><span id="dProgress">68</span>%</p>
              </div>
            </div>
          </div>

          <h3 class="mt-8 text-lg font-extrabold text-slate-900">Lesson-by-Lesson Progress</h3>
          <div id="lessonProgressList" class="mt-4 space-y-4"></div>

          <h3 class="mt-8 text-lg font-extrabold text-slate-900">Quiz Performance</h3>
          <div class="mt-4 rounded-2xl bg-white ring-1 ring-black/5 p-6 flex items-center justify-between">
            <div>
              <p class="text-sm font-semibold text-slate-500">Average Quiz Score</p>
              <p class="mt-2 text-4xl font-extrabold text-brand-700"><span id="dQuiz">87</span>%</p>
            </div>
            <div class="h-16 w-16 rounded-full bg-brand-600 text-white flex items-center justify-center ring-1 ring-black/5">
              <svg viewBox="0 0 24 24" class="h-8 w-8" fill="none" stroke="currentColor" stroke-width="2">
                <path stroke-linecap="round" stroke-linejoin="round" d="M7 21h10" />
                <path stroke-linecap="round" stroke-linejoin="round" d="M12 17V3" />
                <path stroke-linecap="round" stroke-linejoin="round" d="M9 6h6" />
                <path stroke-linecap="round" stroke-linejoin="round" d="M8 13l4-2 4 2" />
              </svg>
            </div>
          </div>

          <h3 class="mt-8 text-lg font-extrabold text-slate-900">Assessment Status</h3>
          <div class="mt-4 rounded-2xl bg-white ring-1 ring-black/5 p-6 flex items-center justify-between gap-4">
            <div>
              <p class="text-sm font-semibold text-slate-500">Current Status</p>
              <span id="dAssessPill" class="mt-3 inline-flex items-center rounded-full px-4 py-1.5 text-xs font-extrabold bg-emerald-100 text-emerald-800 ring-1 ring-black/5">
                Submitted
              </span>
            </div>

            <button id="viewSubmissionBtn"
              class="hidden inline-flex items-center justify-center gap-2 rounded-xl bg-brand-50 px-4 py-2.5 text-sm font-extrabold text-brand-800 ring-1 ring-black/5 hover:bg-brand-100">
              <svg viewBox="0 0 24 24" class="h-5 w-5" fill="none" stroke="currentColor" stroke-width="2">
                <path stroke-linecap="round" stroke-linejoin="round" d="M7 3h10a2 2 0 012 2v14a2 2 0 01-2 2H7a2 2 0 01-2-2V5a2 2 0 012-2z" />
                <path stroke-linecap="round" stroke-linejoin="round" d="M9 7h6M9 11h6M9 15h4" />
              </svg>
              View Submission
            </button>
          </div>

          <h3 class="mt-8 text-lg font-extrabold text-slate-900">Admin Notes</h3>
          <div class="mt-4 rounded-2xl bg-white ring-1 ring-black/5 p-6">
            <textarea id="adminNotes" rows="5" placeholder="Add notes about this student..."
              class="w-full rounded-xl border border-slate-200 bg-white px-4 py-3 text-sm outline-none focus:ring-4 focus:ring-brand-200"></textarea>

            <div class="mt-4 flex items-center justify-between">
              <div class="text-xs text-slate-500 font-semibold">Notes are stored locally (prototype).</div>
              <button id="saveNotesBtn"
                class="inline-flex items-center justify-center gap-2 rounded-xl bg-brand-600 px-4 py-2.5 text-sm font-extrabold text-white shadow-softer hover:bg-brand-700 focus:outline-none focus:ring-4 focus:ring-brand-200">
                <svg viewBox="0 0 24 24" class="h-5 w-5" fill="none" stroke="currentColor" stroke-width="2">
                  <path stroke-linecap="round" stroke-linejoin="round" d="M5 21h14V7l-3-3H5v17z" />
                  <path stroke-linecap="round" stroke-linejoin="round" d="M9 21V13h6v8" />
                </svg>
                Save Notes
              </button>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- SUBMISSION MODAL -->
  <div id="submissionModal" class="fixed inset-0 z-[70] hidden">
    <div class="absolute inset-0 bg-black/60"></div>

    <div class="absolute inset-x-4 top-6 bottom-6 md:inset-x-10 lg:inset-x-24 flex items-center justify-center">
      <div class="w-full max-w-5xl h-full rounded-3xl bg-white shadow-soft ring-1 ring-black/10 overflow-hidden flex flex-col">
        <div class="bg-gradient-to-r from-brand-600 to-brand-500 px-7 py-5 flex items-start justify-between gap-4">
          <div>
            <p class="text-xl font-extrabold text-white">Assessment Submission</p>
            <p id="sStudentLine" class="text-sm font-semibold text-white/85 mt-0.5">Maria Santos - STU-2024-001</p>
          </div>

          <button id="closeSubmission" class="h-10 w-10 rounded-xl bg-white/15 ring-1 ring-white/15 text-white flex items-center justify-center hover:bg-white/20" aria-label="Close">
            <svg viewBox="0 0 24 24" class="h-5 w-5" fill="none" stroke="currentColor" stroke-width="2">
              <path stroke-linecap="round" stroke-linejoin="round" d="M6 18L18 6M6 6l12 12" />
            </svg>
          </button>
        </div>

        <div class="nice-scroll flex-1 overflow-y-auto p-7">
          <div class="rounded-2xl bg-slate-50 ring-1 ring-black/5 p-6">
            <div class="grid gap-6 md:grid-cols-3">
              <div>
                <p class="text-xs font-extrabold text-slate-400 uppercase">Submission Date</p>
                <p id="sDate" class="mt-1 font-extrabold text-slate-900">May 15, 2024 at 3:45 PM</p>
              </div>
              <div>
                <p class="text-xs font-extrabold text-slate-400 uppercase">Status</p>
                <span id="sStatus" class="mt-2 inline-flex items-center rounded-full px-4 py-1.5 text-xs font-extrabold bg-emerald-100 text-emerald-800 ring-1 ring-black/5">
                  Submitted
                </span>
              </div>
              <div>
                <p class="text-xs font-extrabold text-slate-400 uppercase">Grade</p>
                <p id="sGrade" class="mt-1 font-extrabold text-brand-700">Pending Review</p>
              </div>
            </div>
          </div>

          <h3 class="mt-8 text-lg font-extrabold text-slate-900">Essay Responses</h3>
          <div id="essayList" class="mt-4 space-y-5"></div>

          <h3 class="mt-8 text-lg font-extrabold text-slate-900">Attached Files</h3>
          <div class="mt-4 space-y-4">
            <div class="rounded-2xl bg-white ring-1 ring-black/5 p-5 flex items-center justify-between gap-4">
              <div class="flex items-center gap-4">
                <div class="h-12 w-12 rounded-xl bg-rose-50 ring-1 ring-black/5 flex items-center justify-center text-rose-600 font-extrabold">PDF</div>
                <div>
                  <p class="font-extrabold text-slate-900">Communication_Assessment.pdf</p>
                  <p class="text-xs text-slate-500 font-semibold">2.4 MB</p>
                </div>
              </div>
              <a href="#" class="inline-flex items-center gap-2 rounded-xl bg-brand-50 px-4 py-2.5 text-sm font-extrabold text-brand-800 ring-1 ring-black/5 hover:bg-brand-100">
                <svg viewBox="0 0 24 24" class="h-5 w-5" fill="none" stroke="currentColor" stroke-width="2">
                  <path stroke-linecap="round" stroke-linejoin="round" d="M12 3v12m0 0l4-4m-4 4l-4-4" />
                  <path stroke-linecap="round" stroke-linejoin="round" d="M4 17v3h16v-3" />
                </svg>
                Download
              </a>
            </div>

            <div class="rounded-2xl bg-white ring-1 ring-black/5 p-5 flex items-center justify-between gap-4">
              <div class="flex items-center gap-4">
                <div class="h-12 w-12 rounded-xl bg-sky-50 ring-1 ring-black/5 flex items-center justify-center text-sky-700 font-extrabold">DOC</div>
                <div>
                  <p class="font-extrabold text-slate-900">References.docx</p>
                  <p class="text-xs text-slate-500 font-semibold">156 KB</p>
                </div>
              </div>
              <a href="#" class="inline-flex items-center gap-2 rounded-xl bg-brand-50 px-4 py-2.5 text-sm font-extrabold text-brand-800 ring-1 ring-black/5 hover:bg-brand-100">
                <svg viewBox="0 0 24 24" class="h-5 w-5" fill="none" stroke="currentColor" stroke-width="2">
                  <path stroke-linecap="round" stroke-linejoin="round" d="M12 3v12m0 0l4-4m-4 4l-4-4" />
                  <path stroke-linecap="round" stroke-linejoin="round" d="M4 17v3h16v-3" />
                </svg>
                Download
              </a>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <script>
    const students = [
      {
        id: "STU-2024-001",
        name: "Maria Santos",
        email: "maria.santos@student.edu",
        course: "BS Computer Science",
        year: "2nd Year",
        lastLogin: "2 hours ago",
        status: "Active",
        progress: 68,
        lessons: [
          { title: "Lesson 1: Introduction to Communication", pct: 100, parts: "4 of 4 parts completed" },
          { title: "Lesson 2: Verbal and Non-Verbal Communication", pct: 100, parts: "4 of 4 parts completed" },
          { title: "Lesson 3: Written Communication Skills", pct: 45, parts: "2 of 4 parts completed" },
          { title: "Lesson 4: Presentation and Public Speaking", pct: 0, parts: "0 of 4 parts completed" },
        ],
        l1: 100, l2: 100, l3: 45, l4: 0,
        quiz: 87,
        assessment: { status: "Submitted", submittedAt: "May 15, 2024 at 3:45 PM", grade: "Pending Review" },
      },
      {
        id: "STU-2024-002",
        name: "Juan Cruz",
        email: "juan.cruz@student.edu",
        course: "BS Information Technology",
        year: "3rd Year",
        lastLogin: "5 hours ago",
        status: "Active",
        progress: 92,
        lessons: [
          { title: "Lesson 1: Introduction to Communication", pct: 100, parts: "4 of 4 parts completed" },
          { title: "Lesson 2: Verbal and Non-Verbal Communication", pct: 100, parts: "4 of 4 parts completed" },
          { title: "Lesson 3: Written Communication Skills", pct: 100, parts: "4 of 4 parts completed" },
          { title: "Lesson 4: Presentation and Public Speaking", pct: 75, parts: "3 of 4 parts completed" },
        ],
        l1: 100, l2: 100, l3: 100, l4: 75,
        quiz: 94,
        assessment: { status: "Submitted", submittedAt: "May 16, 2024 at 10:12 AM", grade: "Pending Review" },
      },
      {
        id: "STU-2024-003",
        name: "Ana Reyes",
        email: "ana.reyes@student.edu",
        course: "BS Business Administration",
        year: "1st Year",
        lastLogin: "1 day ago",
        status: "Active",
        progress: 45,
        lessons: [
          { title: "Lesson 1: Introduction to Communication", pct: 100, parts: "4 of 4 parts completed" },
          { title: "Lesson 2: Verbal and Non-Verbal Communication", pct: 70, parts: "3 of 4 parts completed" },
          { title: "Lesson 3: Written Communication Skills", pct: 20, parts: "1 of 4 parts completed" },
          { title: "Lesson 4: Presentation and Public Speaking", pct: 0, parts: "0 of 4 parts completed" },
        ],
        l1: 100, l2: 70, l3: 20, l4: 0,
        quiz: 78,
        assessment: { status: "Pending", submittedAt: "", grade: "" },
      },
      {
        id: "STU-2024-004",
        name: "Carla Mendoza",
        email: "carla.mendoza@student.edu",
        course: "BS Computer Science",
        year: "2nd Year",
        lastLogin: "3 days ago",
        status: "Inactive",
        progress: 28,
        lessons: [
          { title: "Lesson 1: Introduction to Communication", pct: 100, parts: "4 of 4 parts completed" },
          { title: "Lesson 2: Verbal and Non-Verbal Communication", pct: 40, parts: "2 of 4 parts completed" },
          { title: "Lesson 3: Written Communication Skills", pct: 0, parts: "0 of 4 parts completed" },
          { title: "Lesson 4: Presentation and Public Speaking", pct: 0, parts: "0 of 4 parts completed" },
        ],
        l1: 100, l2: 40, l3: 0, l4: 0,
        quiz: 65,
        assessment: { status: "Pending", submittedAt: "", grade: "" },
      },
      {
        id: "STU-2024-005",
        name: "Leah Garcia",
        email: "leah.garcia@student.edu",
        course: "BS Nursing",
        year: "4th Year",
        lastLogin: "30 minutes ago",
        status: "Active",
        progress: 85,
        lessons: [
          { title: "Lesson 1: Introduction to Communication", pct: 100, parts: "4 of 4 parts completed" },
          { title: "Lesson 2: Verbal and Non-Verbal Communication", pct: 100, parts: "4 of 4 parts completed" },
          { title: "Lesson 3: Written Communication Skills", pct: 100, parts: "4 of 4 parts completed" },
          { title: "Lesson 4: Presentation and Public Speaking", pct: 60, parts: "2 of 4 parts completed" },
        ],
        l1: 100, l2: 100, l3: 100, l4: 60,
        quiz: 91,
        assessment: { status: "Submitted", submittedAt: "May 18, 2024 at 1:05 PM", grade: "Pending Review" },
      },
    ];

    const defaultEssays = [
      {
        q: "Question 1: Explain the importance of effective communication in professional settings",
        words: 500,
        a: `Effective communication is fundamental to success in any professional environment. It serves as the backbone of organizational operations, enabling teams to collaborate efficiently, share ideas, and achieve common goals. In today's globalized business landscape, the ability to communicate clearly and persuasively has become more critical than ever.

First and foremost, effective communication fosters better teamwork and collaboration. When team members can express their thoughts clearly and listen actively to others, it creates an environment of mutual understanding and respect. This leads to improved problem-solving capabilities as diverse perspectives are shared and considered. Moreover, clear communication helps prevent misunderstandings that could lead to costly errors or conflicts within the organization.

Furthermore, strong communication skills are essential for leadership and career advancement. Professionals who can articulate their ideas convincingly, present information effectively, and adapt their communication style to different audiences are more likely to be recognized and promoted. In client-facing roles, excellent communication builds trust and strengthens business relationships, ultimately contributing to organizational success and personal career growth.`,
      },
      {
        q: "Question 2: Discuss the different communication styles and how they impact workplace relationships",
        words: 450,
        a: `Communication styles significantly influence how individuals interact and work together. In professional settings, common styles include direct, considerate, systematic, and spirited communication. Each style has strengths and potential limitations depending on the context and the people involved.

A direct style values clarity and efficiency, which can be beneficial during decision-making or urgent tasks. However, if used without tact, it may be perceived as harsh. A considerate style prioritizes empathy and cooperation, supporting positive team relationships but sometimes slowing decisions. A systematic style is detailed and organized, helpful for documentation and accuracy, though it can feel rigid. A spirited style brings energy and motivation, encouraging creativity, but may be seen as unfocused if not guided.

Understanding these styles helps teams reduce conflict, improve collaboration, and communicate more effectively by adjusting tone, detail, and delivery to meet the needs of different colleagues.`,
      },
      {
        q: "Question 3: Analyze a communication barrier you have experienced and how you overcame it",
        words: 400,
        a: `During my internship at a multinational company, I encountered a significant communication barrier related to cultural differences. I was assigned to work with a team that included members from Japan, Germany, and the Philippines. Initially, I struggled to understand the varying communication styles and expectations across these cultures.

The Japanese team members tended to communicate indirectly and valued harmony, often avoiding direct disagreement. The German colleagues, on the other hand, were very direct and valued efficiency in communication. This created confusion during meetings, as I sometimes misinterpreted indirect feedback as agreement when it was actually polite disagreement. Additionally, language barriers occasionally led to misunderstandings, even though we all spoke English.

To overcome these barriers, I took several proactive steps. First, I researched cultural communication norms to better understand each team member's background. I also started asking clarifying questions more frequently and summarizing key points at the end of discussions to ensure everyone was aligned. Most importantly, I learned to be more observant of non-verbal cues and to adapt my communication style based on my audience.`,
      },
    ];

    const $ = (id) => document.getElementById(id);
    const initials = (name) => name.split(" ").slice(0,2).map(x => x[0]).join("").toUpperCase();

    function statusPill(status) {
      if (status === "Active") return "bg-emerald-100 text-emerald-800";
      return "bg-slate-100 text-slate-700";
    }
    function assessPill(status) {
      if (status === "Submitted") return "bg-emerald-100 text-emerald-800";
      return "bg-orange-100 text-orange-800";
    }
    function progressBadge(p) {
      if (p >= 76) return "bg-emerald-100 text-emerald-800";
      if (p >= 51) return "bg-orange-100 text-orange-800";
      if (p >= 26) return "bg-rose-100 text-rose-800";
      return "bg-slate-100 text-slate-700";
    }

    function computeStats(list) {
      const total = list.length;
      const activeToday = list.filter(s => /minutes|hour/i.test(s.lastLogin)).length;
      const avg = Math.round(list.reduce((a,s) => a + s.progress, 0) / Math.max(1, total));
      const pendingAssessments = list.filter(s => s.assessment.status !== "Submitted").length;

      $("statTotal").textContent = total;
      $("statActive").textContent = activeToday;
      $("statAvg").textContent = avg;
      $("statPending").textContent = pendingAssessments;

      $("l1Done").textContent = list.filter(s => s.l1 === 100).length;
      $("l2Done").textContent = list.filter(s => s.l2 === 100).length;
      $("l3Done").textContent = list.filter(s => s.l3 === 100).length;
      $("l4Done").textContent = list.filter(s => s.l4 === 100).length;

      $("lTotal1").textContent = total;
      $("lTotal2").textContent = total;
      $("lTotal3").textContent = total;
      $("lTotal4").textContent = total;
    }

    function renderCourseOptions() {
      const courses = Array.from(new Set(students.map(s => s.course))).sort();
      const sel = $("courseFilter");
      courses.forEach(c => {
        const opt = document.createElement("option");
        opt.value = c;
        opt.textContent = c;
        sel.appendChild(opt);
      });
    }

    function rowHTML(s) {
      return `
        <tr class="hover:bg-slate-50/60">
          <td class="py-5 pr-4 align-top">
            <div class="font-extrabold text-slate-900">${s.name}</div>
            <div class="text-xs text-slate-500 font-semibold">${s.id}</div>
            <div class="text-xs text-slate-400">${s.email}</div>
          </td>

          <td class="py-5 pr-4 align-top">
            <div class="text-sm font-extrabold text-slate-700">${s.course}</div>
            <div class="text-xs text-slate-500 font-semibold mt-1">${s.year}</div>
          </td>

          <td class="py-5 pr-4 align-top">
            <div class="text-sm font-semibold text-slate-700">${s.lastLogin}</div>
          </td>

          <td class="py-5 pr-4 align-top">
            <span class="inline-flex items-center rounded-full px-4 py-1.5 text-xs font-extrabold ring-1 ring-black/5 ${statusPill(s.status)}">${s.status}</span>
          </td>

          <td class="py-5 pr-4 align-top">
            <div class="flex items-center gap-3">
              <div class="w-24 h-2.5 rounded-full bg-slate-200 overflow-hidden">
                <div class="h-2.5 bg-brand-600" style="width:${s.progress}%"></div>
              </div>
              <span class="inline-flex items-center rounded-lg px-3 py-1 text-xs font-extrabold ring-1 ring-black/5 ${progressBadge(s.progress)}">${s.progress}%</span>
            </div>
          </td>

          <td class="py-5 pr-4 align-top text-sm font-extrabold text-brand-700">${s.l1}%</td>
          <td class="py-5 pr-4 align-top text-sm font-extrabold text-brand-700">${s.l2}%</td>
          <td class="py-5 pr-4 align-top text-sm font-extrabold text-slate-700">${s.l3}%</td>
          <td class="py-5 pr-4 align-top text-sm font-extrabold text-slate-700">${s.l4}%</td>
          <td class="py-5 pr-4 align-top text-sm font-extrabold text-slate-700">${s.quiz}%</td>

          <td class="py-5 pr-4 align-top">
            <span class="inline-flex items-center rounded-full px-4 py-1.5 text-xs font-extrabold ring-1 ring-black/5 ${assessPill(s.assessment.status)}">${s.assessment.status}</span>
          </td>

          <td class="py-5 align-top">
            <button data-student="${s.id}" class="view-details inline-flex items-center justify-center rounded-xl bg-brand-100 px-4 py-2 text-sm font-extrabold text-brand-800 hover:bg-brand-200 ring-1 ring-black/5">
              View Details
            </button>
          </td>
        </tr>
      `;
    }

    function renderTable(list) {
      const tbody = $("studentTbody");
      tbody.innerHTML = list.map(rowHTML).join("");
      tbody.querySelectorAll(".view-details").forEach(btn => {
        btn.addEventListener("click", () => openDetails(btn.getAttribute("data-student")));
      });
    }

    function applyFilters() {
      const q = $("searchInput").value.trim().toLowerCase();
      const course = $("courseFilter").value;
      const year = $("yearFilter").value;
      const prog = $("progressFilter").value;

      let list = [...students];

      if (q) {
        list = list.filter(s =>
          s.name.toLowerCase().includes(q) ||
          s.id.toLowerCase().includes(q) ||
          s.email.toLowerCase().includes(q)
        );
      }
      if (course !== "all") list = list.filter(s => s.course === course);
      if (year !== "all") list = list.filter(s => s.year === year);

      if (prog !== "all") {
        const [a,b] = prog.split("-").map(Number);
        list = list.filter(s => s.progress >= a && s.progress <= b);
      }

      renderTable(list);
      computeStats(list);
    }

    let activeStudent = null;

    function openDetails(studentId) {
      const s = students.find(x => x.id === studentId);
      if (!s) return;
      activeStudent = s;

      $("dAvatar").textContent = initials(s.name);
      $("dName").textContent = s.name;
      $("dId").textContent = s.id;
      $("dEmail").textContent = s.email;

      $("dCourse").textContent = s.course;
      $("dYear").textContent = s.year;
      $("dLastLogin").textContent = s.lastLogin;
      $("dProgress").textContent = s.progress;

      const pill = $("dStatusPill");
      pill.textContent = s.status;
      pill.className = `inline-flex items-center rounded-full px-4 py-1.5 text-xs font-extrabold ring-1 ring-black/5 ${statusPill(s.status)}`;

      $("dQuiz").textContent = s.quiz;

      const assess = $("dAssessPill");
      assess.textContent = s.assessment.status;
      assess.className = `mt-3 inline-flex items-center rounded-full px-4 py-1.5 text-xs font-extrabold ring-1 ring-black/5 ${assessPill(s.assessment.status)}`;

      const wrap = $("lessonProgressList");
      wrap.innerHTML = s.lessons.map(l => `
        <div class="rounded-2xl bg-white ring-1 ring-black/5 p-6">
          <div class="flex items-center justify-between gap-4">
            <p class="text-sm font-extrabold text-slate-900">${l.title}</p>
            <p class="text-sm font-extrabold text-brand-700">${l.pct}%</p>
          </div>
          <div class="mt-3 h-2.5 w-full rounded-full bg-slate-200 overflow-hidden">
            <div class="h-2.5 bg-brand-600" style="width:${l.pct}%"></div>
          </div>
          <div class="mt-3 text-xs text-slate-500 font-semibold flex items-center gap-2">
            <span class="inline-flex h-5 w-5 items-center justify-center rounded-full bg-slate-100 ring-1 ring-black/5">
              <svg viewBox="0 0 24 24" class="h-3.5 w-3.5 text-slate-600" fill="none" stroke="currentColor" stroke-width="2">
                <path stroke-linecap="round" stroke-linejoin="round" d="M20 6L9 17l-5-5" />
              </svg>
            </span>
            ${l.parts}
          </div>
        </div>
      `).join("");

      const key = `pc_admin_note_${s.id}`;
      $("adminNotes").value = localStorage.getItem(key) || "";

      const viewBtn = $("viewSubmissionBtn");
      if (s.assessment.status === "Submitted") {
        viewBtn.classList.remove("hidden");
        viewBtn.onclick = () => openSubmission(s);
      } else {
        viewBtn.classList.add("hidden");
        viewBtn.onclick = null;
      }

      $("detailsModal").classList.remove("hidden");
      document.body.classList.add("overflow-hidden");
    }

    function closeDetails() {
      $("detailsModal").classList.add("hidden");
      document.body.classList.remove("overflow-hidden");
    }

    $("closeDetails").addEventListener("click", closeDetails);
    $("saveNotesBtn").addEventListener("click", () => {
      if (!activeStudent) return;
      localStorage.setItem(`pc_admin_note_${activeStudent.id}`, $("adminNotes").value || "");
      $("saveNotesBtn").textContent = "Saved!";
      setTimeout(() => $("saveNotesBtn").innerHTML = `
        <svg viewBox="0 0 24 24" class="h-5 w-5" fill="none" stroke="currentColor" stroke-width="2">
          <path stroke-linecap="round" stroke-linejoin="round" d="M5 21h14V7l-3-3H5v17z" />
          <path stroke-linecap="round" stroke-linejoin="round" d="M9 21V13h6v8" />
        </svg>
        Save Notes
      `, 900);
    });

    function openSubmission(s) {
      $("sStudentLine").textContent = `${s.name} - ${s.id}`;
      $("sDate").textContent = s.assessment.submittedAt || "";
      $("sStatus").textContent = s.assessment.status;
      $("sGrade").textContent = s.assessment.grade || "";

      $("essayList").innerHTML = defaultEssays.map((x) => `
        <div class="rounded-2xl bg-white ring-1 ring-black/5 p-6">
          <div class="flex items-start justify-between gap-4">
            <p class="text-sm font-extrabold text-slate-900">${x.q}</p>
            <p class="text-xs font-extrabold text-slate-400">${x.words} words</p>
          </div>
          <div class="mt-4 rounded-xl bg-slate-50 ring-1 ring-black/5 p-5 text-sm leading-relaxed text-slate-600 whitespace-pre-line">${x.a}</div>
        </div>
      `).join("");

      $("submissionModal").classList.remove("hidden");
    }

    function closeSubmission() {
      $("submissionModal").classList.add("hidden");
    }
    $("closeSubmission").addEventListener("click", closeSubmission);

    function exportCSV() {
      const headers = ["Name","Student ID","Email","Course","Year","Last Login","Status","Progress","L1","L2","L3","L4","Quiz","Assessment"];
      const rows = students.map(s => [s.name, s.id, s.email, s.course, s.year, s.lastLogin, s.status, s.progress, s.l1, s.l2, s.l3, s.l4, s.quiz, s.assessment.status]);
      const csv = [headers, ...rows].map(r => r.map(v => `"${String(v).replaceAll('"','""')}"`).join(",")).join("\\n");
      const blob = new Blob([csv], { type: "text/csv;charset=utf-8;" });
      const url = URL.createObjectURL(blob);
      const a = document.createElement("a");
      a.href = url;
      a.download = "purposive_admin_report.csv";
      document.body.appendChild(a);
      a.click();
      a.remove();
      URL.revokeObjectURL(url);
    }
    $("exportBtn").addEventListener("click", exportCSV);

    const overlay = $("sidebarOverlay");
    $("openSidebarBtn").addEventListener("click", () => overlay.classList.remove("hidden"));
    $("closeSidebarBtn").addEventListener("click", () => overlay.classList.add("hidden"));
    overlay.addEventListener("click", (e) => { if (e.target === overlay.firstElementChild) overlay.classList.add("hidden"); });

    renderCourseOptions();
    computeStats(students);
    renderTable(students);

    ["searchInput","courseFilter","yearFilter","progressFilter"].forEach(id => {
      $(id).addEventListener("input", applyFilters);
      $(id).addEventListener("change", applyFilters);
    });
  </script>
</body>
</html>

